# 服装材质

## 材质分类

基础服装材质：写实基础，写实遮罩，写实半透，二次元基础，二次元遮罩，二次元半透。

特殊服装材质：绒毛材质，丝袜材质。

## 双面渲染

材质球可以根据需要切换正面渲染和双面渲染模式

![img](https://arkimg.ark.online/1748252368765-1.png)

| 正面渲染（单面渲染）                                  | 双面渲染                                              |
| ----------------------------------------------------- | ----------------------------------------------------- |
| ![img](https://arkimg.ark.online/1748252383995-4.png) | ![img](https://arkimg.ark.online/1748252395028-7.png) |

### 贴图合成工具

- 针对混合贴图，可以使用贴图合成工具来快速组合
  - 把制作的单独贴图，拖入对应通道。点击保存。
  - 同时也支持合成好的混合贴图直接使用
- 不同材质有不同的混合模式，根据文字说明放入对应贴图
  - 服装材质混合贴图为MRFE（下图左）
  - 绒毛，丝袜，头发混合贴图为SNEN（下图右）
- 所有材质设置有默认贴图效果，没有制作的贴图使用默认效果即可

![img](https://arkimg.ark.online/1748252410851-10.png)

- 合成工具使用方法：

<video controls src="https://arkimg.ark.online/%E8%B4%B4%E5%9B%BE%E5%90%88%E6%88%90%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95.mp4" />

- 支持PS等工具手动合成后直接使用

<video controls src="https://arkimg.ark.online/PS%E5%90%88%E6%88%90%E8%B4%B4%E5%9B%BE.mp4" />

## 基础服装材质：

- 根据不同渲染效果，服装材质分为写实和二次元两大类。

| 写实类材更接近真实光影渲染                             | 二次元类具有明显的风格化画面效果                       |
| ------------------------------------------------------ | ------------------------------------------------------ |
| ![img](https://arkimg.ark.online/1748252431714-17.png) | ![img](https://arkimg.ark.online/1748252443753-20.png) |

- 基础服装材质又根据支持不同半透效果，分为三类，三种材质仅对透明度效果表现不同，其余参数完全一致
  - 基础材质（Base Material）：不支持投透贴效果
  - 遮罩材质（Maks Material）：只支持黑白颜色的透贴效果（灰色过度Alpha会被截断），在游戏中不会有勾边效果。
  - 半透明材质（Translucent Material）：支持灰色渐变透贴效果，在游戏中不会有勾边效果。
- 对应效果如下图

![img](https://arkimg.ark.online/1748252461732-23.jpeg)

### 贴图

- 基础服装材质都属于PBR材质，需要基于 PBR 流程制作贴图。
- 为照顾游戏内性能，需要把常规的PBR贴图按照不同通道储存，规则如下
- Color Map：
  - 贴图RGB通道绘制颜色信息
  - A通道绘制透明度，黑色透明，白色不透明。（需要搭配遮罩材质或半透材质使用）
- Normal Map：DirectX法线贴图
  - RGB通道绘制法线信息
- MRFE Map：（推荐使用贴图合成工具）
  - R=Metallic（金属度）
  - G=Roughness（粗糙度）
  - B=Flare（闪光贴图）
  - A=Emissive（自发光遮罩）

### 闪光功能：

- 仅基础服装材质支持闪光功能。
- 绒毛、头发、丝袜材质暂不支持闪光。
- 支持双层闪光，每层闪光密度形状略有不同，搭配使用效果更好。
- 闪光作为一个独立功能，需要使用一张单独贴图来绘制需要发光的区域。
- 白色为可以闪光。黑色为不闪光。不同明度的灰色，可以控制闪光数量的疏密变化。

### 材质基础参数

- 除基础贴图外，材质还提供效果参数调整功能
- 材质**默认参数可满足大部分模型使用**，一般情况仅需制作贴图即可，**无需过多参数调整**。

![img](https://arkimg.ark.online/1748252471781-26.png)

- 漫反射颜色：
  - 漫反射颜色：可以整体调整色彩倾向
- 法线：
  - 法线强度：整体调整法线强度，1为完全贴图法线强度，0为无法线强度
- 物理属性：
  - 金属高光强度：基于混合贴图中的金属度贴图，调整金属高光的强弱效果
  - 金属高光衰减：基于混合贴图中的金属度贴图，调整金属高光的衰减效果
- 自发光：
  - 自发光强度：调整自发光强度，值越大越强。自发光颜色来自于贴图本身的颜色。自发光区域来自于贴图MRFE，A通道
- 边缘光：
  - 强度：调整边缘光的强弱。值越大，亮度越强
  - 宽度：调整边缘光宽度。值越大，边缘光越宽
  - 软硬：调整边缘光边缘软硬，值越小，边缘光过渡越硬，注意：值为0的时候表现会异常
  - 衰减强度：调整边缘光衰减范围，值越大，衰减越强

### 闪光质感参数：

- 支持双层闪光，每层闪光密度形状略有不同，搭配使用效果更好。
  - 默认情况，闪光颜色来自贴图本身颜色。
  - 开启颜色开关后，闪光可以单独设置颜色。
- 闪光开关：为0时，关闭闪光效果，为1时，开启闪光效果
- 闪光密度：值越大，闪光越密集
- 首层闪光亮度：调整第一层闪光亮度，值越大，越亮
- 首层颜色开关：0时，闪光使用贴图颜色，1时，闪光使用单独颜色（需搭配首层颜色使用）
- 首层颜色：调整第一层闪光颜色
- 二层闪光亮度：调整第二层闪光亮度，值越大，越亮
- 二层颜色开关：0时，闪光使用贴图颜色，1时，闪光使用单独颜色（需搭配首层颜色使用）
- 二层颜色：调整第二层闪光颜色

### 材质参数效果：

<video controls src="https://arkimg.ark.online/045%E6%9C%8D%E8%A3%85%E6%9D%90%E8%B4%A8.mp4" />

## 特殊服装材质：

### 绒毛材质

- 模拟绒毛效果。
- 使用绒毛材质的商品支持换色功能

#### 贴图：

通过Color Map的A通道的灰度控制绒毛长度。

- Color Map：
  - 贴图RGB通道绘制颜色信息
  - A通道绘制绒毛长度，白色长度最长，黑色长度最短
- 混合贴图：（推荐使用贴图合成工具）
  - Normal Map：DirectX法线贴图
    - RGB通道绘制法线信息
  - Specular Map：绘制高光区域
  - Emissive Map：绘制自发光区域

#### 材质参数

- 除基础贴图外，材质还提供效果参数调整功能
- 材质**默认参数可满足大部分模型使用**，一般情况仅需制作贴图即可，**无需过多参数调整**。
- 绒毛材质不支持双面显示。

![img](https://arkimg.ark.online/1748252481846-29.png)

- 基础属性：
  - 漫反射颜色：可以整体调整色彩倾向
  - 绒毛密度：调整绒毛整体密度，值越大绒毛越密
  - 绒毛边缘羽化：调整绒毛的软硬程度，值越大，边缘越软
  - 绒毛长度：调整绒毛整体长度，值越大，绒毛越长
  - 绒毛厚度：调整绒毛整体厚度，值越小，绒毛越厚
  - 绒毛方向：调整绒毛整体朝向，正值受重力，负值反重力
- 物理属性：
  - 高光强度：调整高光强度，根据混合贴图中高光贴图所绘制的区域。值越大高光效果越强
  - 高光宽度：调整高光宽度，值越大高光区域越宽
  - 整体AO强度：调整AO强度，值越大AO效果越强
  - 细节AO强度：调整AO强度，值越大AO效果越强
- 自发光：
  - 自发光强度：调整自发光强度，根据混合贴图中自发光贴图所绘制的区域，值越大，自发光效果越强

#### 材质参数效果：

<video controls src="https://arkimg.ark.online/%E6%AF%9B%E6%AF%9B.mp4" />

### 丝袜材质

- 专门提供给丝袜类使用的材质。包括不限于各种袜子，贴身类衣服，全身连体黑丝等服装
- 丝袜模型的UV需要与裸模皮肤的UV保持一致。结合透明度贴图，可以实现袜子内层透出皮肤效果。

![img](https://arkimg.ark.online/1748252490041-32.png)

- 非贴身类衣服，无需透肉感时，请使用常规服装材质。例如，丝质飘带等
- 使用丝袜材质的商品支持换色功能

#### 贴图：

通过Color Map的A通道的灰度控丝袜的透明程度。

- Color Map：
  - 贴图RGB通道绘制颜色信息
  - A通道绘丝袜透明度，黑色完全透明显示皮肤颜色，白色完全不透明。
- 混合贴图：（推荐使用贴图合成工具）
  - Normal Map：DirectX法线贴图
    - RGB通道绘制法线信息
  - Specular Map：绘制高光区域
  - Emissive Map：绘制自发光区域
- 对应关系与效果参考如下：

| Color Map 1 | RGB                                                    | A                                                      |
| ----------- | ------------------------------------------------------ | ------------------------------------------------------ |
|             | ![img](https://arkimg.ark.online/1748252496332-35.png) | ![img](https://arkimg.ark.online/1748252503054-38.png) |
| Color Map 2 | RGB                                                    | A                                                      |
|             | ![img](https://arkimg.ark.online/1748252510557-41.png) | ![img](https://arkimg.ark.online/1748252516508-44.png) |

- 透明度对袜子的效果影响对比：视频中左边模型使用Color Map1,右边模型使用Color Map2

<video controls src="https://arkimg.ark.online/%E8%A2%9C%E5%AD%90%E9%80%8F%E6%98%8E%E5%BA%A6%E5%AF%B9%E6%AF%94.mp4" />

#### 材质参数

- 除基础贴图外，材质还提供效果参数调整功能
- 材质**默认参数可满足大部分模型使用**，一般情况仅需制作贴图即可，**无需过多参数调整**。

![img](https://arkimg.ark.online/1748252528770-47.png)

- 基础属性：
  - 漫反射颜色：可以整体调整色彩倾向
  - 透明度： 调整透明度曲率变化。值越大，越不透明，值越小，越透明
- 物理属性：
  - 高光强度：调整高光强度，根据混合贴图中高光贴图所绘制的区域。值越大高光效果越强
  - 高光宽度：调整高光宽度，值越大高光区域越宽
- 自发光：
  - 自发光强度：调整自发光强度，根据混合贴图中自发光贴图所绘制的区域，值越大，自发光效果越强
- 边缘光：
  - 强度：调整边缘光的强弱。值越大，亮度越强
  - 宽度：调整边缘光宽度。值越大，边缘光越宽
  - 软硬：调整边缘光边缘软硬，值越小，边缘光过渡越硬，注意：值为0的时候表现会异常
  - 衰减强度：调整边缘光衰减范围，值越大，衰减越强

#### 材质参数效果：

<video controls src="https://arkimg.ark.online/%E8%A2%9C%E5%AD%90.mp4" />